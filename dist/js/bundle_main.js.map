{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/dbhelper.js","src/js/images.js","src/js/main.js"],"names":[],"mappings":"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","file":"bundle_main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","const ImageInfo = require('./images')\r\n/**\r\n * Common database helper functions.\r\n */\r\nclass DBHelper {\r\n\r\n  /**\r\n   * Database URL.\r\n   * Change this to restaurants.json file location on your server.\r\n   */\r\n  static get DATABASE_URL() {\r\n    const port = '@@server_port' // Change this to your server port\r\n    return `http://localhost:${port}/restaurants`;\r\n  }\r\n\r\n  /**\r\n   * Fetch all restaurants.\r\n   */\r\n  static fetchRestaurants(callback) {\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.open('GET', DBHelper.DATABASE_URL);\r\n    xhr.onload = () => {\r\n      if (xhr.status === 200) { // Got a success response from server!\r\n        const restaurants = JSON.parse(xhr.responseText);\r\n        const imageData = ImageInfo.ImageInfoData;\r\n        restaurants.map(function (restaurant) {\r\n          if (restaurant.photograph) {\r\n            restaurant.alt = imageData[restaurant.photograph].alt;\r\n            restaurant.caption = imageData[restaurant.photograph].caption;\r\n          }\r\n          return restaurant;\r\n        });\r\n        callback(null, restaurants);\r\n      } else { // Oops!. Got an error from server.\r\n        const error = (`Request failed. Returned status of ${xhr.status}`);\r\n        callback(error, null);\r\n      }\r\n    };\r\n    xhr.send();\r\n  }\r\n\r\n  /**\r\n   * Fetch a restaurant by its ID.\r\n   */\r\n  static fetchRestaurantById(id, callback) {\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.open('GET', DBHelper.DATABASE_URL + '/' + id);\r\n    xhr.onload = () => {\r\n      if (xhr.status === 200) { // Got a success response from server!\r\n        const restaurant = JSON.parse(xhr.responseText);\r\n        if (restaurant.photograph) {\r\n          const imageData = ImageInfo.ImageInfoData;\r\n          restaurant.alt = imageData[restaurant.photograph].alt;\r\n          restaurant.caption = imageData[restaurant.photograph].caption;\r\n        }\r\n        callback(null, restaurant);\r\n      } else { // Oops!. Got an error from server.\r\n        const error = (`Request failed. Returned status of ${xhr.status}`);\r\n        callback(error, null);\r\n      }\r\n    };\r\n    xhr.send();\r\n  }\r\n\r\n  /**\r\n   * Fetch restaurants by a cuisine type with proper error handling.\r\n   */\r\n  static fetchRestaurantByCuisine(cuisine, callback) {\r\n    // Fetch all restaurants  with proper error handling\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Filter restaurants to have only given cuisine type\r\n        const results = restaurants.filter(r => r.cuisine_type == cuisine);\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch restaurants by a neighborhood with proper error handling.\r\n   */\r\n  static fetchRestaurantByNeighborhood(neighborhood, callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Filter restaurants to have only given neighborhood\r\n        const results = restaurants.filter(r => r.neighborhood == neighborhood);\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch restaurants by a cuisine and a neighborhood with proper error handling.\r\n   */\r\n  static fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood, callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        let results = restaurants\r\n        if (cuisine != 'all') { // filter by cuisine\r\n          results = results.filter(r => r.cuisine_type == cuisine);\r\n        }\r\n        if (neighborhood != 'all') { // filter by neighborhood\r\n          results = results.filter(r => r.neighborhood == neighborhood);\r\n        }\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch all neighborhoods with proper error handling.\r\n   */\r\n  static fetchNeighborhoods(callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Get all neighborhoods from all restaurants\r\n        const neighborhoods = restaurants.map((v, i) => restaurants[i].neighborhood)\r\n        // Remove duplicates from neighborhoods\r\n        const uniqueNeighborhoods = neighborhoods.filter((v, i) => neighborhoods.indexOf(v) == i)\r\n        callback(null, uniqueNeighborhoods);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch all cuisines with proper error handling.\r\n   */\r\n  static fetchCuisines(callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Get all cuisines from all restaurants\r\n        const cuisines = restaurants.map((v, i) => restaurants[i].cuisine_type)\r\n        // Remove duplicates from cuisines\r\n        const uniqueCuisines = cuisines.filter((v, i) => cuisines.indexOf(v) == i)\r\n        callback(null, uniqueCuisines);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Restaurant page URL.\r\n   */\r\n  static urlForRestaurant(restaurant) {\r\n    return (`./restaurant.html?id=${restaurant.id}`);\r\n  }\r\n\r\n  /**\r\n   * Restaurant image URLs JSON.\r\n   */\r\n  static imageUrlForRestaurant(restaurant) {\r\n    const representationsURLs = DBHelper.imageRepresentationsPaths(restaurant.photograph);\r\n    return representationsURLs;\r\n  }\r\n\r\n  /**\r\n   * Paths for various image representations\r\n   */\r\n  static imageRepresentationsPaths(filename) {\r\n    const [folderName, suffix] = ['./img/', 'jpg'];\r\n    const large_1x = folderName.concat(filename, '-1024_1x', '.', suffix);\r\n    const large_2x = folderName.concat(filename, '-1024_2x', '.', suffix);\r\n    const small_1x = folderName.concat(filename, '-560_1x', '.', suffix);\r\n    const small_2x = folderName.concat(filename, '-560_2x', '.', suffix);\r\n\r\n    return {\r\n      large_1x: large_1x,\r\n      large_2x: large_2x,\r\n      small_1x: small_1x,\r\n      small_2x: small_2x\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Map marker for a restaurant.\r\n   */\r\n  static mapMarkerForRestaurant(restaurant, map) {\r\n    const marker = new google.maps.Marker({\r\n      position: restaurant.latlng,\r\n      title: restaurant.name,\r\n      url: DBHelper.urlForRestaurant(restaurant),\r\n      map: map,\r\n      animation: google.maps.Animation.DROP\r\n    });\r\n    return marker;\r\n  }\r\n\r\n}\r\nmodule.exports = DBHelper;","/**\n * Common image info class\n */\nclass ImageInfo {\n\n  static get ImageInfoData() {\n\n    return {\n      1: {\n        \"id\": 1,\n        \"photograph\": \"1\",\n        \"alt\": \"the main restaurant area\",\n        \"caption\": \"Large space with nice decoration\"\n      },\n      2: {\n        \"id\": 2,\n        \"photograph\": \"2\",\n        \"alt\": \"pizza on a plate\",\n        \"caption\": \"Tasty pizzas made every day\"\n      },\n      3: {\n        \"id\": 3,\n        \"photograph\": \"3.jpg\",\n        \"alt\": \"the main restaurant area empty\",\n        \"caption\": \"Modern design to enjoy your meals\",\n      },\n      4: {\n        \"id\": 4,\n        \"photograph\": \"4.jpg\",\n        \"alt\": \"the entrance of the shop\",\n        \"caption\": \"The corner shop, easy to spot\"\n      },\n      5: {\n        \"id\": 5,\n        \"photograph\": \"5.jpg\",\n        \"alt\": \"inside the shop, customers and staff\",\n        \"caption\": \"Meet our friendly staff\"\n      },\n      6: {\n        \"id\": 6,\n        \"photograph\": \"6.jpg\",\n        \"alt\": \"the area inside with some people queueing and other eating\",\n        \"caption\": \"Large space for big groups\"\n      },\n      7: {\n        \"id\": 7,\n        \"photograph\": \"7.jpg\",\n        \"alt\": \"black and white, the display of the shop with 2 people passing by\",\n        \"caption\": \"Our classic shop, still keeping our values\"\n      },\n      8: {\n        \"id\": 8,\n        \"name\": \"The Dutch\",\n        \"neighborhood\": \"Manhattan\",\n        \"photograph\": \"8.jpg\"\n      },\n      9: {\n        \"id\": 9,\n        \"photograph\": \"9.jpg\",\n        \"caption\": \"Enjoying our home made meals\",\n        \"alt\": \"black and white, people eating in the restaurant\"\n      },\n      10: {\n        \"id\": 10,\n        \"photograph\": \"10.jpg\",\n        \"alt\": \"the area inside the shop, the furniture and bar, without people\",\n        \"caption\": \"Modern space, ready to serve your appetite\"\n      }\n    }\n  }\n}\n\nmodule.exports = ImageInfo;","const DBHelper = require('./dbhelper');\r\n\r\nlet restaurants,\r\n  neighborhoods,\r\n  cuisines\r\nvar map\r\nthis.markers = []\r\n\r\n\r\n/**\r\n * Fetch neighborhoods and cuisines as soon as the page is loaded.\r\n */\r\ndocument.addEventListener('DOMContentLoaded', (event) => {\r\n  fetchNeighborhoods();\r\n  fetchCuisines();\r\n});\r\n\r\n/**\r\n * Service Worker (self init)\r\n */\r\n(setupServiceWorker = () => {\r\n  return new Promise((resolve, reject) => {\r\n    if ('serviceWorker' in navigator) {\r\n      window.addEventListener('load', function () {\r\n        navigator.serviceWorker.register('/sw.js').then(function (registration) {\r\n          // Registration was successful\r\n          console.log('ServiceWorker registration successful with scope: ', registration.scope);\r\n          resolve();\r\n        }, function (err) {\r\n          // registration failed :(\r\n          console.log('ServiceWorker registration failed: ', err);\r\n          reject(err);\r\n        });\r\n      });\r\n    }\r\n  });\r\n})();\r\n\r\n/**\r\n * Fetch all neighborhoods and set their HTML.\r\n */\r\nfetchNeighborhoods = () => {\r\n  DBHelper.fetchNeighborhoods((error, neighborhoods) => {\r\n    if (error) { //  Got an error\r\n      console.error(error);\r\n    } else {\r\n      this.neighborhoods = neighborhoods;\r\n      fillNeighborhoodsHTML();\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Set neighborhoods HTML.\r\n */\r\nfillNeighborhoodsHTML = (neighborhoods = this.neighborhoods) => {\r\n  const select = document.getElementById('neighborhoods-select');\r\n  neighborhoods.forEach(neighborhood => {\r\n    const option = document.createElement('option');\r\n    option.innerHTML = neighborhood;\r\n    option.value = neighborhood;\r\n    select.append(option);\r\n  });\r\n}\r\n\r\n/**\r\n * Fetch all cuisines and set their HTML.\r\n */\r\nfetchCuisines = () => {\r\n  DBHelper.fetchCuisines((error, cuisines) => {\r\n    if (error) { // Got an error!\r\n      console.error(error);\r\n    } else {\r\n      this.cuisines = cuisines;\r\n      fillCuisinesHTML();\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Set cuisines HTML.\r\n */\r\nfillCuisinesHTML = (cuisines = this.cuisines) => {\r\n  const select = document.getElementById('cuisines-select');\r\n\r\n  cuisines.forEach(cuisine => {\r\n    const option = document.createElement('option');\r\n    option.innerHTML = cuisine;\r\n    option.value = cuisine;\r\n    select.append(option);\r\n  });\r\n}\r\n\r\n/**\r\n * Initialize Google map, called from HTML.\r\n */\r\nwindow.initMap = () => {\r\n  let loc = {\r\n    lat: 40.722216,\r\n    lng: -73.987501\r\n  };\r\n  this.map = new google.maps.Map(document.getElementById('map'), {\r\n    zoom: 12,\r\n    center: loc,\r\n    scrollwheel: false\r\n  });\r\n  updateRestaurants();\r\n}\r\n\r\n/**\r\n * Update page and map for current restaurants.\r\n */\r\nupdateRestaurants = () => {\r\n  const cSelect = document.getElementById('cuisines-select');\r\n  const nSelect = document.getElementById('neighborhoods-select');\r\n\r\n  const cIndex = cSelect.selectedIndex;\r\n  const nIndex = nSelect.selectedIndex;\r\n\r\n  const cuisine = cSelect[cIndex].value;\r\n  const neighborhood = nSelect[nIndex].value;\r\n\r\n  DBHelper.fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood, (error, restaurants) => {\r\n    if (error) { // Got an error!\r\n      console.error(error);\r\n    } else {\r\n      resetRestaurants(restaurants);\r\n      fillRestaurantsHTML();\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * Clear current restaurants, their HTML and remove their map markers.\r\n */\r\nresetRestaurants = (restaurants) => {\r\n  // Remove all restaurants\r\n  this.restaurants = [];\r\n  const ul = document.getElementById('restaurants-list');\r\n  ul.innerHTML = '';\r\n\r\n  // Remove all map markers\r\n  this.markers.forEach(m => m.setMap(null));\r\n  this.markers = [];\r\n  this.restaurants = restaurants;\r\n}\r\n\r\n/**\r\n * Create all restaurants HTML and add them to the webpage.\r\n */\r\nfillRestaurantsHTML = (restaurants = this.restaurants) => {\r\n  const ul = document.getElementById('restaurants-list');\r\n  restaurants.forEach(restaurant => {\r\n    ul.append(createRestaurantHTML(restaurant));\r\n  });\r\n  addMarkersToMap();\r\n}\r\n\r\n/**\r\n * Create restaurant HTML.\r\n */\r\ncreateRestaurantHTML = (restaurant) => {\r\n  const li = document.createElement('li');\r\n\r\n  if (restaurant.photograph) {\r\n    const imageRepresentations = DBHelper.imageUrlForRestaurant(restaurant);\r\n    const picture = document.createElement('picture');\r\n    picture.className = 'restaurant-img';\r\n    picture.setAttribute('aria-labelledby', \"fig_\" + restaurant.id);\r\n    picture.setAttribute('role', 'img');\r\n\r\n    const sourceSmall = document.createElement('source');\r\n    sourceSmall.setAttribute('media', '(max-width:700px)');\r\n    sourceSmall.setAttribute('srcset',\r\n      imageRepresentations.small_1x\r\n      .concat(' 1x,')\r\n      .concat(imageRepresentations.small_2x)\r\n      .concat(' 2x')\r\n    );\r\n    picture.append(sourceSmall);\r\n\r\n    const sourceLarge = document.createElement('source');\r\n    sourceLarge.setAttribute('media', '(min-width:701px)');\r\n    sourceLarge.setAttribute('srcset',\r\n      imageRepresentations.large_1x\r\n      .concat(' 1x,')\r\n      .concat(imageRepresentations.large_2x)\r\n      .concat(' 2x')\r\n    );\r\n    picture.append(sourceLarge);\r\n\r\n    const image = document.createElement('img');\r\n    image.src = imageRepresentations.small_2x;\r\n    image.setAttribute('alt', 'restaurant '.concat(restaurant.name, ', ', restaurant.alt));\r\n    image.className = 'restaurant-img';\r\n    picture.append(image);\r\n\r\n    const figcaption = document.createElement('figcaption');\r\n    figcaption.setAttribute('id', \"fig_\" + restaurant.id)\r\n    figcaption.innerHTML = restaurant.caption;\r\n    picture.append(figcaption);\r\n\r\n    li.append(picture);\r\n  }\r\n\r\n  const name = document.createElement('h1');\r\n  name.innerHTML = restaurant.name;\r\n  li.append(name);\r\n\r\n  const neighborhood = document.createElement('p');\r\n  neighborhood.innerHTML = restaurant.neighborhood;\r\n  li.append(neighborhood);\r\n\r\n  const address = document.createElement('p');\r\n  address.innerHTML = restaurant.address;\r\n  li.append(address);\r\n\r\n  const more = document.createElement('a');\r\n  more.innerHTML = 'View Details';\r\n  more.setAttribute('role', 'button');\r\n  more.setAttribute('aria-label', 'View more about ' + restaurant.name);\r\n  more.href = DBHelper.urlForRestaurant(restaurant);\r\n  li.append(more)\r\n\r\n  return li\r\n}\r\n\r\n/**\r\n * Add markers for current restaurants to the map.\r\n */\r\naddMarkersToMap = (restaurants = this.restaurants) => {\r\n  restaurants.forEach(restaurant => {\r\n    // Add marker to the map\r\n    const marker = DBHelper.mapMarkerForRestaurant(restaurant, this.map);\r\n    google.maps.event.addListener(marker, 'click', () => {\r\n      window.location.href = marker.url\r\n    });\r\n    this.markers.push(marker);\r\n  });\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZGJoZWxwZXIuanMiLCJzcmMvanMvaW1hZ2VzLmpzIiwic3JjL2pzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxNQUFNLFlBQVksUUFBUSxVQUFSLENBQWxCO0FBQ0E7OztBQUdBLE1BQU0sUUFBTixDQUFlOztBQUViOzs7O0FBSUEsYUFBVyxZQUFYLEdBQTBCO0FBQ3hCLFVBQU0sT0FBTyxlQUFiLENBRHdCLENBQ0s7QUFDN0IsV0FBUSxvQkFBbUIsSUFBSyxjQUFoQztBQUNEOztBQUVEOzs7QUFHQSxTQUFPLGdCQUFQLENBQXdCLFFBQXhCLEVBQWtDO0FBQ2hDLFFBQUksTUFBTSxJQUFJLGNBQUosRUFBVjtBQUNBLFFBQUksSUFBSixDQUFTLEtBQVQsRUFBZ0IsU0FBUyxZQUF6QjtBQUNBLFFBQUksTUFBSixHQUFhLE1BQU07QUFDakIsVUFBSSxJQUFJLE1BQUosS0FBZSxHQUFuQixFQUF3QjtBQUFFO0FBQ3hCLGNBQU0sY0FBYyxLQUFLLEtBQUwsQ0FBVyxJQUFJLFlBQWYsQ0FBcEI7QUFDQSxjQUFNLFlBQVksVUFBVSxhQUE1QjtBQUNBLG9CQUFZLEdBQVosQ0FBZ0IsVUFBVSxVQUFWLEVBQXNCO0FBQ3BDLGNBQUksV0FBVyxVQUFmLEVBQTJCO0FBQ3pCLHVCQUFXLEdBQVgsR0FBaUIsVUFBVSxXQUFXLFVBQXJCLEVBQWlDLEdBQWxEO0FBQ0EsdUJBQVcsT0FBWCxHQUFxQixVQUFVLFdBQVcsVUFBckIsRUFBaUMsT0FBdEQ7QUFDRDtBQUNELGlCQUFPLFVBQVA7QUFDRCxTQU5EO0FBT0EsaUJBQVMsSUFBVCxFQUFlLFdBQWY7QUFDRCxPQVhELE1BV087QUFBRTtBQUNQLGNBQU0sUUFBVSxzQ0FBcUMsSUFBSSxNQUFPLEVBQWhFO0FBQ0EsaUJBQVMsS0FBVCxFQUFnQixJQUFoQjtBQUNEO0FBQ0YsS0FoQkQ7QUFpQkEsUUFBSSxJQUFK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O0FBQ0QsR0FQRDtBQVFELENBVEQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY29uc3QgSW1hZ2VJbmZvID0gcmVxdWlyZSgnLi9pbWFnZXMnKVxyXG4vKipcclxuICogQ29tbW9uIGRhdGFiYXNlIGhlbHBlciBmdW5jdGlvbnMuXHJcbiAqL1xyXG5jbGFzcyBEQkhlbHBlciB7XHJcblxyXG4gIC8qKlxyXG4gICAqIERhdGFiYXNlIFVSTC5cclxuICAgKiBDaGFuZ2UgdGhpcyB0byByZXN0YXVyYW50cy5qc29uIGZpbGUgbG9jYXRpb24gb24geW91ciBzZXJ2ZXIuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldCBEQVRBQkFTRV9VUkwoKSB7XHJcbiAgICBjb25zdCBwb3J0ID0gJ0BAc2VydmVyX3BvcnQnIC8vIENoYW5nZSB0aGlzIHRvIHlvdXIgc2VydmVyIHBvcnRcclxuICAgIHJldHVybiBgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9L3Jlc3RhdXJhbnRzYDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGFsbCByZXN0YXVyYW50cy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50cyhjYWxsYmFjaykge1xyXG4gICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgeGhyLm9wZW4oJ0dFVCcsIERCSGVscGVyLkRBVEFCQVNFX1VSTCk7XHJcbiAgICB4aHIub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7IC8vIEdvdCBhIHN1Y2Nlc3MgcmVzcG9uc2UgZnJvbSBzZXJ2ZXIhXHJcbiAgICAgICAgY29uc3QgcmVzdGF1cmFudHMgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IEltYWdlSW5mby5JbWFnZUluZm9EYXRhO1xyXG4gICAgICAgIHJlc3RhdXJhbnRzLm1hcChmdW5jdGlvbiAocmVzdGF1cmFudCkge1xyXG4gICAgICAgICAgaWYgKHJlc3RhdXJhbnQucGhvdG9ncmFwaCkge1xyXG4gICAgICAgICAgICByZXN0YXVyYW50LmFsdCA9IGltYWdlRGF0YVtyZXN0YXVyYW50LnBob3RvZ3JhcGhdLmFsdDtcclxuICAgICAgICAgICAgcmVzdGF1cmFudC5jYXB0aW9uID0gaW1hZ2VEYXRhW3Jlc3RhdXJhbnQucGhvdG9ncmFwaF0uY2FwdGlvbjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiByZXN0YXVyYW50O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnRzKTtcclxuICAgICAgfSBlbHNlIHsgLy8gT29wcyEuIEdvdCBhbiBlcnJvciBmcm9tIHNlcnZlci5cclxuICAgICAgICBjb25zdCBlcnJvciA9IChgUmVxdWVzdCBmYWlsZWQuIFJldHVybmVkIHN0YXR1cyBvZiAke3hoci5zdGF0dXN9YCk7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgeGhyLnNlbmQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGEgcmVzdGF1cmFudCBieSBpdHMgSUQuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIGNhbGxiYWNrKSB7XHJcbiAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB4aHIub3BlbignR0VUJywgREJIZWxwZXIuREFUQUJBU0VfVVJMICsgJy8nICsgaWQpO1xyXG4gICAgeGhyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkgeyAvLyBHb3QgYSBzdWNjZXNzIHJlc3BvbnNlIGZyb20gc2VydmVyIVxyXG4gICAgICAgIGNvbnN0IHJlc3RhdXJhbnQgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgIGlmIChyZXN0YXVyYW50LnBob3RvZ3JhcGgpIHtcclxuICAgICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IEltYWdlSW5mby5JbWFnZUluZm9EYXRhO1xyXG4gICAgICAgICAgcmVzdGF1cmFudC5hbHQgPSBpbWFnZURhdGFbcmVzdGF1cmFudC5waG90b2dyYXBoXS5hbHQ7XHJcbiAgICAgICAgICByZXN0YXVyYW50LmNhcHRpb24gPSBpbWFnZURhdGFbcmVzdGF1cmFudC5waG90b2dyYXBoXS5jYXB0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KTtcclxuICAgICAgfSBlbHNlIHsgLy8gT29wcyEuIEdvdCBhbiBlcnJvciBmcm9tIHNlcnZlci5cclxuICAgICAgICBjb25zdCBlcnJvciA9IChgUmVxdWVzdCBmYWlsZWQuIFJldHVybmVkIHN0YXR1cyBvZiAke3hoci5zdGF0dXN9YCk7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgeGhyLnNlbmQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSB0eXBlIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmUoY3Vpc2luZSwgY2FsbGJhY2spIHtcclxuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50cyAgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRmlsdGVyIHJlc3RhdXJhbnRzIHRvIGhhdmUgb25seSBnaXZlbiBjdWlzaW5lIHR5cGVcclxuICAgICAgICBjb25zdCByZXN1bHRzID0gcmVzdGF1cmFudHMuZmlsdGVyKHIgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5TmVpZ2hib3Job29kKG5laWdoYm9yaG9vZCwgY2FsbGJhY2spIHtcclxuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xyXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGaWx0ZXIgcmVzdGF1cmFudHMgdG8gaGF2ZSBvbmx5IGdpdmVuIG5laWdoYm9yaG9vZFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIociA9PiByLm5laWdoYm9yaG9vZCA9PSBuZWlnaGJvcmhvb2QpO1xyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSBhbmQgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSByZXN0YXVyYW50c1xyXG4gICAgICAgIGlmIChjdWlzaW5lICE9ICdhbGwnKSB7IC8vIGZpbHRlciBieSBjdWlzaW5lXHJcbiAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIociA9PiByLmN1aXNpbmVfdHlwZSA9PSBjdWlzaW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5laWdoYm9yaG9vZCAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgbmVpZ2hib3Job29kXHJcbiAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIociA9PiByLm5laWdoYm9yaG9vZCA9PSBuZWlnaGJvcmhvb2QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hOZWlnaGJvcmhvb2RzKGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gR2V0IGFsbCBuZWlnaGJvcmhvb2RzIGZyb20gYWxsIHJlc3RhdXJhbnRzXHJcbiAgICAgICAgY29uc3QgbmVpZ2hib3Job29kcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0ubmVpZ2hib3Job29kKVxyXG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gbmVpZ2hib3Job29kc1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZU5laWdoYm9yaG9vZHMgPSBuZWlnaGJvcmhvb2RzLmZpbHRlcigodiwgaSkgPT4gbmVpZ2hib3Job29kcy5pbmRleE9mKHYpID09IGkpXHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgdW5pcXVlTmVpZ2hib3Job29kcyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIGN1aXNpbmVzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaEN1aXNpbmVzKGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gR2V0IGFsbCBjdWlzaW5lcyBmcm9tIGFsbCByZXN0YXVyYW50c1xyXG4gICAgICAgIGNvbnN0IGN1aXNpbmVzID0gcmVzdGF1cmFudHMubWFwKCh2LCBpKSA9PiByZXN0YXVyYW50c1tpXS5jdWlzaW5lX3R5cGUpXHJcbiAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBjdWlzaW5lc1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZUN1aXNpbmVzID0gY3Vpc2luZXMuZmlsdGVyKCh2LCBpKSA9PiBjdWlzaW5lcy5pbmRleE9mKHYpID09IGkpXHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgdW5pcXVlQ3Vpc2luZXMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3RhdXJhbnQgcGFnZSBVUkwuXHJcbiAgICovXHJcbiAgc3RhdGljIHVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xyXG4gICAgcmV0dXJuIChgLi9yZXN0YXVyYW50Lmh0bWw/aWQ9JHtyZXN0YXVyYW50LmlkfWApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBpbWFnZSBVUkxzIEpTT04uXHJcbiAgICovXHJcbiAgc3RhdGljIGltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICBjb25zdCByZXByZXNlbnRhdGlvbnNVUkxzID0gREJIZWxwZXIuaW1hZ2VSZXByZXNlbnRhdGlvbnNQYXRocyhyZXN0YXVyYW50LnBob3RvZ3JhcGgpO1xyXG4gICAgcmV0dXJuIHJlcHJlc2VudGF0aW9uc1VSTHM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQYXRocyBmb3IgdmFyaW91cyBpbWFnZSByZXByZXNlbnRhdGlvbnNcclxuICAgKi9cclxuICBzdGF0aWMgaW1hZ2VSZXByZXNlbnRhdGlvbnNQYXRocyhmaWxlbmFtZSkge1xyXG4gICAgY29uc3QgW2ZvbGRlck5hbWUsIHN1ZmZpeF0gPSBbJy4vaW1nLycsICdqcGcnXTtcclxuICAgIGNvbnN0IGxhcmdlXzF4ID0gZm9sZGVyTmFtZS5jb25jYXQoZmlsZW5hbWUsICctMTAyNF8xeCcsICcuJywgc3VmZml4KTtcclxuICAgIGNvbnN0IGxhcmdlXzJ4ID0gZm9sZGVyTmFtZS5jb25jYXQoZmlsZW5hbWUsICctMTAyNF8yeCcsICcuJywgc3VmZml4KTtcclxuICAgIGNvbnN0IHNtYWxsXzF4ID0gZm9sZGVyTmFtZS5jb25jYXQoZmlsZW5hbWUsICctNTYwXzF4JywgJy4nLCBzdWZmaXgpO1xyXG4gICAgY29uc3Qgc21hbGxfMnggPSBmb2xkZXJOYW1lLmNvbmNhdChmaWxlbmFtZSwgJy01NjBfMngnLCAnLicsIHN1ZmZpeCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbGFyZ2VfMXg6IGxhcmdlXzF4LFxyXG4gICAgICBsYXJnZV8yeDogbGFyZ2VfMngsXHJcbiAgICAgIHNtYWxsXzF4OiBzbWFsbF8xeCxcclxuICAgICAgc21hbGxfMng6IHNtYWxsXzJ4XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFwIG1hcmtlciBmb3IgYSByZXN0YXVyYW50LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBtYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIG1hcCkge1xyXG4gICAgY29uc3QgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcbiAgICAgIHBvc2l0aW9uOiByZXN0YXVyYW50LmxhdGxuZyxcclxuICAgICAgdGl0bGU6IHJlc3RhdXJhbnQubmFtZSxcclxuICAgICAgdXJsOiBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpLFxyXG4gICAgICBtYXA6IG1hcCxcclxuICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uRFJPUFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbWFya2VyO1xyXG4gIH1cclxuXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBEQkhlbHBlcjsiLCIvKipcbiAqIENvbW1vbiBpbWFnZSBpbmZvIGNsYXNzXG4gKi9cbmNsYXNzIEltYWdlSW5mbyB7XG5cbiAgc3RhdGljIGdldCBJbWFnZUluZm9EYXRhKCkge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIDE6IHtcbiAgICAgICAgXCJpZFwiOiAxLFxuICAgICAgICBcInBob3RvZ3JhcGhcIjogXCIxXCIsXG4gICAgICAgIFwiYWx0XCI6IFwidGhlIG1haW4gcmVzdGF1cmFudCBhcmVhXCIsXG4gICAgICAgIFwiY2FwdGlvblwiOiBcIkxhcmdlIHNwYWNlIHdpdGggbmljZSBkZWNvcmF0aW9uXCJcbiAgICAgIH0sXG4gICAgICAyOiB7XG4gICAgICAgIFwiaWRcIjogMixcbiAgICAgICAgXCJwaG90b2dyYXBoXCI6IFwiMlwiLFxuICAgICAgICBcImFsdFwiOiBcInBpenphIG9uIGEgcGxhdGVcIixcbiAgICAgICAgXCJjYXB0aW9uXCI6IFwiVGFzdHkgcGl6emFzIG1hZGUgZXZlcnkgZGF5XCJcbiAgICAgIH0sXG4gICAgICAzOiB7XG4gICAgICAgIFwiaWRcIjogMyxcbiAgICAgICAgXCJwaG90b2dyYXBoXCI6IFwiMy5qcGdcIixcbiAgICAgICAgXCJhbHRcIjogXCJ0aGUgbWFpbiByZXN0YXVyYW50IGFyZWEgZW1wdHlcIixcbiAgICAgICAgXCJjYXB0aW9uXCI6IFwiTW9kZXJuIGRlc2lnbiB0byBlbmpveSB5b3VyIG1lYWxzXCIsXG4gICAgICB9LFxuICAgICAgNDoge1xuICAgICAgICBcImlkXCI6IDQsXG4gICAgICAgIFwicGhvdG9ncmFwaFwiOiBcIjQuanBnXCIsXG4gICAgICAgIFwiYWx0XCI6IFwidGhlIGVudHJhbmNlIG9mIHRoZSBzaG9wXCIsXG4gICAgICAgIFwiY2FwdGlvblwiOiBcIlRoZSBjb3JuZXIgc2hvcCwgZWFzeSB0byBzcG90XCJcbiAgICAgIH0sXG4gICAgICA1OiB7XG4gICAgICAgIFwiaWRcIjogNSxcbiAgICAgICAgXCJwaG90b2dyYXBoXCI6IFwiNS5qcGdcIixcbiAgICAgICAgXCJhbHRcIjogXCJpbnNpZGUgdGhlIHNob3AsIGN1c3RvbWVycyBhbmQgc3RhZmZcIixcbiAgICAgICAgXCJjYXB0aW9uXCI6IFwiTWVldCBvdXIgZnJpZW5kbHkgc3RhZmZcIlxuICAgICAgfSxcbiAgICAgIDY6IHtcbiAgICAgICAgXCJpZFwiOiA2LFxuICAgICAgICBcInBob3RvZ3JhcGhcIjogXCI2LmpwZ1wiLFxuICAgICAgICBcImFsdFwiOiBcInRoZSBhcmVhIGluc2lkZSB3aXRoIHNvbWUgcGVvcGxlIHF1ZXVlaW5nIGFuZCBvdGhlciBlYXRpbmdcIixcbiAgICAgICAgXCJjYXB0aW9uXCI6IFwiTGFyZ2Ugc3BhY2UgZm9yIGJpZyBncm91cHNcIlxuICAgICAgfSxcbiAgICAgIDc6IHtcbiAgICAgICAgXCJpZFwiOiA3LFxuICAgICAgICBcInBob3RvZ3JhcGhcIjogXCI3LmpwZ1wiLFxuICAgICAgICBcImFsdFwiOiBcImJsYWNrIGFuZCB3aGl0ZSwgdGhlIGRpc3BsYXkgb2YgdGhlIHNob3Agd2l0aCAyIHBlb3BsZSBwYXNzaW5nIGJ5XCIsXG4gICAgICAgIFwiY2FwdGlvblwiOiBcIk91ciBjbGFzc2ljIHNob3AsIHN0aWxsIGtlZXBpbmcgb3VyIHZhbHVlc1wiXG4gICAgICB9LFxuICAgICAgODoge1xuICAgICAgICBcImlkXCI6IDgsXG4gICAgICAgIFwibmFtZVwiOiBcIlRoZSBEdXRjaFwiLFxuICAgICAgICBcIm5laWdoYm9yaG9vZFwiOiBcIk1hbmhhdHRhblwiLFxuICAgICAgICBcInBob3RvZ3JhcGhcIjogXCI4LmpwZ1wiXG4gICAgICB9LFxuICAgICAgOToge1xuICAgICAgICBcImlkXCI6IDksXG4gICAgICAgIFwicGhvdG9ncmFwaFwiOiBcIjkuanBnXCIsXG4gICAgICAgIFwiY2FwdGlvblwiOiBcIkVuam95aW5nIG91ciBob21lIG1hZGUgbWVhbHNcIixcbiAgICAgICAgXCJhbHRcIjogXCJibGFjayBhbmQgd2hpdGUsIHBlb3BsZSBlYXRpbmcgaW4gdGhlIHJlc3RhdXJhbnRcIlxuICAgICAgfSxcbiAgICAgIDEwOiB7XG4gICAgICAgIFwiaWRcIjogMTAsXG4gICAgICAgIFwicGhvdG9ncmFwaFwiOiBcIjEwLmpwZ1wiLFxuICAgICAgICBcImFsdFwiOiBcInRoZSBhcmVhIGluc2lkZSB0aGUgc2hvcCwgdGhlIGZ1cm5pdHVyZSBhbmQgYmFyLCB3aXRob3V0IHBlb3BsZVwiLFxuICAgICAgICBcImNhcHRpb25cIjogXCJNb2Rlcm4gc3BhY2UsIHJlYWR5IHRvIHNlcnZlIHlvdXIgYXBwZXRpdGVcIlxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEltYWdlSW5mbzsiLCJjb25zdCBEQkhlbHBlciA9IHJlcXVpcmUoJy4vZGJoZWxwZXInKTtcclxuXHJcbmxldCByZXN0YXVyYW50cyxcclxuICBuZWlnaGJvcmhvb2RzLFxyXG4gIGN1aXNpbmVzXHJcbnZhciBtYXBcclxudGhpcy5tYXJrZXJzID0gW11cclxuXHJcblxyXG4vKipcclxuICogRmV0Y2ggbmVpZ2hib3Job29kcyBhbmQgY3Vpc2luZXMgYXMgc29vbiBhcyB0aGUgcGFnZSBpcyBsb2FkZWQuXHJcbiAqL1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKGV2ZW50KSA9PiB7XHJcbiAgZmV0Y2hOZWlnaGJvcmhvb2RzKCk7XHJcbiAgZmV0Y2hDdWlzaW5lcygpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBTZXJ2aWNlIFdvcmtlciAoc2VsZiBpbml0KVxyXG4gKi9cclxuKHNldHVwU2VydmljZVdvcmtlciA9ICgpID0+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy9zdy5qcycpLnRoZW4oZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHdhcyBzdWNjZXNzZnVsXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmljZVdvcmtlciByZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bCB3aXRoIHNjb3BlOiAnLCByZWdpc3RyYXRpb24uc2NvcGUpO1xyXG4gICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgIC8vIHJlZ2lzdHJhdGlvbiBmYWlsZWQgOihcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6ICcsIGVycik7XHJcbiAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pKCk7XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygoZXJyb3IsIG5laWdoYm9yaG9vZHMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyAgR290IGFuIGVycm9yXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5uZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcztcclxuICAgICAgZmlsbE5laWdoYm9yaG9vZHNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgbmVpZ2hib3Job29kcyBIVE1MLlxyXG4gKi9cclxuZmlsbE5laWdoYm9yaG9vZHNIVE1MID0gKG5laWdoYm9yaG9vZHMgPSB0aGlzLm5laWdoYm9yaG9vZHMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKTtcclxuICBuZWlnaGJvcmhvb2RzLmZvckVhY2gobmVpZ2hib3Job29kID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IG5laWdoYm9yaG9vZDtcclxuICAgIG9wdGlvbi52YWx1ZSA9IG5laWdoYm9yaG9vZDtcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZldGNoIGFsbCBjdWlzaW5lcyBhbmQgc2V0IHRoZWlyIEhUTUwuXHJcbiAqL1xyXG5mZXRjaEN1aXNpbmVzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoQ3Vpc2luZXMoKGVycm9yLCBjdWlzaW5lcykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmN1aXNpbmVzID0gY3Vpc2luZXM7XHJcbiAgICAgIGZpbGxDdWlzaW5lc0hUTUwoKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBjdWlzaW5lcyBIVE1MLlxyXG4gKi9cclxuZmlsbEN1aXNpbmVzSFRNTCA9IChjdWlzaW5lcyA9IHRoaXMuY3Vpc2luZXMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XHJcblxyXG4gIGN1aXNpbmVzLmZvckVhY2goY3Vpc2luZSA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBjdWlzaW5lO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gY3Vpc2luZTtcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cclxuICovXHJcbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xyXG4gIGxldCBsb2MgPSB7XHJcbiAgICBsYXQ6IDQwLjcyMjIxNixcclxuICAgIGxuZzogLTczLjk4NzUwMVxyXG4gIH07XHJcbiAgdGhpcy5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xyXG4gICAgem9vbTogMTIsXHJcbiAgICBjZW50ZXI6IGxvYyxcclxuICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxyXG4gIH0pO1xyXG4gIHVwZGF0ZVJlc3RhdXJhbnRzKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgcGFnZSBhbmQgbWFwIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzLlxyXG4gKi9cclxudXBkYXRlUmVzdGF1cmFudHMgPSAoKSA9PiB7XHJcbiAgY29uc3QgY1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcclxuICBjb25zdCBuU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XHJcblxyXG4gIGNvbnN0IGNJbmRleCA9IGNTZWxlY3Quc2VsZWN0ZWRJbmRleDtcclxuICBjb25zdCBuSW5kZXggPSBuU2VsZWN0LnNlbGVjdGVkSW5kZXg7XHJcblxyXG4gIGNvbnN0IGN1aXNpbmUgPSBjU2VsZWN0W2NJbmRleF0udmFsdWU7XHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gblNlbGVjdFtuSW5kZXhdLnZhbHVlO1xyXG5cclxuICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoY3Vpc2luZSwgbmVpZ2hib3Job29kLCAoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHMpO1xyXG4gICAgICBmaWxsUmVzdGF1cmFudHNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIENsZWFyIGN1cnJlbnQgcmVzdGF1cmFudHMsIHRoZWlyIEhUTUwgYW5kIHJlbW92ZSB0aGVpciBtYXAgbWFya2Vycy5cclxuICovXHJcbnJlc2V0UmVzdGF1cmFudHMgPSAocmVzdGF1cmFudHMpID0+IHtcclxuICAvLyBSZW1vdmUgYWxsIHJlc3RhdXJhbnRzXHJcbiAgdGhpcy5yZXN0YXVyYW50cyA9IFtdO1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuICB1bC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgLy8gUmVtb3ZlIGFsbCBtYXAgbWFya2Vyc1xyXG4gIHRoaXMubWFya2Vycy5mb3JFYWNoKG0gPT4gbS5zZXRNYXAobnVsbCkpO1xyXG4gIHRoaXMubWFya2VycyA9IFtdO1xyXG4gIHRoaXMucmVzdGF1cmFudHMgPSByZXN0YXVyYW50cztcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhbGwgcmVzdGF1cmFudHMgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5maWxsUmVzdGF1cmFudHNIVE1MID0gKHJlc3RhdXJhbnRzID0gdGhpcy5yZXN0YXVyYW50cykgPT4ge1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgdWwuYXBwZW5kKGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKTtcclxuICB9KTtcclxuICBhZGRNYXJrZXJzVG9NYXAoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwuXHJcbiAqL1xyXG5jcmVhdGVSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50KSA9PiB7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG5cclxuICBpZiAocmVzdGF1cmFudC5waG90b2dyYXBoKSB7XHJcbiAgICBjb25zdCBpbWFnZVJlcHJlc2VudGF0aW9ucyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICAgIGNvbnN0IHBpY3R1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwaWN0dXJlJyk7XHJcbiAgICBwaWN0dXJlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyc7XHJcbiAgICBwaWN0dXJlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5JywgXCJmaWdfXCIgKyByZXN0YXVyYW50LmlkKTtcclxuICAgIHBpY3R1cmUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2ltZycpO1xyXG5cclxuICAgIGNvbnN0IHNvdXJjZVNtYWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XHJcbiAgICBzb3VyY2VTbWFsbC5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgJyhtYXgtd2lkdGg6NzAwcHgpJyk7XHJcbiAgICBzb3VyY2VTbWFsbC5zZXRBdHRyaWJ1dGUoJ3NyY3NldCcsXHJcbiAgICAgIGltYWdlUmVwcmVzZW50YXRpb25zLnNtYWxsXzF4XHJcbiAgICAgIC5jb25jYXQoJyAxeCwnKVxyXG4gICAgICAuY29uY2F0KGltYWdlUmVwcmVzZW50YXRpb25zLnNtYWxsXzJ4KVxyXG4gICAgICAuY29uY2F0KCcgMngnKVxyXG4gICAgKTtcclxuICAgIHBpY3R1cmUuYXBwZW5kKHNvdXJjZVNtYWxsKTtcclxuXHJcbiAgICBjb25zdCBzb3VyY2VMYXJnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xyXG4gICAgc291cmNlTGFyZ2Uuc2V0QXR0cmlidXRlKCdtZWRpYScsICcobWluLXdpZHRoOjcwMXB4KScpO1xyXG4gICAgc291cmNlTGFyZ2Uuc2V0QXR0cmlidXRlKCdzcmNzZXQnLFxyXG4gICAgICBpbWFnZVJlcHJlc2VudGF0aW9ucy5sYXJnZV8xeFxyXG4gICAgICAuY29uY2F0KCcgMXgsJylcclxuICAgICAgLmNvbmNhdChpbWFnZVJlcHJlc2VudGF0aW9ucy5sYXJnZV8yeClcclxuICAgICAgLmNvbmNhdCgnIDJ4JylcclxuICAgICk7XHJcbiAgICBwaWN0dXJlLmFwcGVuZChzb3VyY2VMYXJnZSk7XHJcblxyXG4gICAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgIGltYWdlLnNyYyA9IGltYWdlUmVwcmVzZW50YXRpb25zLnNtYWxsXzJ4O1xyXG4gICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAncmVzdGF1cmFudCAnLmNvbmNhdChyZXN0YXVyYW50Lm5hbWUsICcsICcsIHJlc3RhdXJhbnQuYWx0KSk7XHJcbiAgICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnO1xyXG4gICAgcGljdHVyZS5hcHBlbmQoaW1hZ2UpO1xyXG5cclxuICAgIGNvbnN0IGZpZ2NhcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWdjYXB0aW9uJyk7XHJcbiAgICBmaWdjYXB0aW9uLnNldEF0dHJpYnV0ZSgnaWQnLCBcImZpZ19cIiArIHJlc3RhdXJhbnQuaWQpXHJcbiAgICBmaWdjYXB0aW9uLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuY2FwdGlvbjtcclxuICAgIHBpY3R1cmUuYXBwZW5kKGZpZ2NhcHRpb24pO1xyXG5cclxuICAgIGxpLmFwcGVuZChwaWN0dXJlKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xyXG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xyXG4gIGxpLmFwcGVuZChuYW1lKTtcclxuXHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIG5laWdoYm9yaG9vZC5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5laWdoYm9yaG9vZDtcclxuICBsaS5hcHBlbmQobmVpZ2hib3Job29kKTtcclxuXHJcbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcclxuICBsaS5hcHBlbmQoYWRkcmVzcyk7XHJcblxyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgbW9yZS5pbm5lckhUTUwgPSAnVmlldyBEZXRhaWxzJztcclxuICBtb3JlLnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKTtcclxuICBtb3JlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdWaWV3IG1vcmUgYWJvdXQgJyArIHJlc3RhdXJhbnQubmFtZSk7XHJcbiAgbW9yZS5ocmVmID0gREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICBsaS5hcHBlbmQobW9yZSlcclxuXHJcbiAgcmV0dXJuIGxpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgbWFya2VycyBmb3IgY3VycmVudCByZXN0YXVyYW50cyB0byB0aGUgbWFwLlxyXG4gKi9cclxuYWRkTWFya2Vyc1RvTWFwID0gKHJlc3RhdXJhbnRzID0gdGhpcy5yZXN0YXVyYW50cykgPT4ge1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICAvLyBBZGQgbWFya2VyIHRvIHRoZSBtYXBcclxuICAgIGNvbnN0IG1hcmtlciA9IERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgdGhpcy5tYXApO1xyXG4gICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbWFya2VyLnVybFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG4gIH0pO1xyXG59Il19"}